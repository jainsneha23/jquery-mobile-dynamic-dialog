!function(a){var b={boxType:{Alert:1,Confirm:2,Prompt:3},type:null,title:null,msg:null,value:null,result:!1,alert:function(a,b,c,d,e){this.type=this.boxType[a],this.msg=b,this.title=c?c:a,this.value=e,this.result=!1,this._show(function(a){d&&d(a)})},_show:function(c){var d=this._createHeader(),e=this._createContent(),f=this._createFooter(),g=a("<div/>").attr("data-role","popup").css({"min-width":"200px","max-width":"575px"});g.append(d).append(e).append(f),g.enhanceWithin(),g.popup({dismissible:!1,transition:"pop",corners:!1,history:!1,theme:"a",overlayTheme:"b"}).on("popupbeforeposition",b._popupbeforeposition).on("popupafterclose",function(a){b._popupafterclose(a,c)}).popup("open")},_createHeader:function(){return node=a("<div />").attr("data-role","header").append(a("<h1 />").html(this.title))},_createContent:function(){switch(this.type){case 3:var b=a("<div />").attr("data-role","content").addClass("ui-content").css("min-height","80px").append(a("<span />").text(this.msg));return a("<input />").attr("type","text").attr("maxlength","50").val(this.value).appendTo(b),b;default:return b=a("<div />").attr("data-role","content").addClass("ui-content").append(a("<span />").text(this.msg))}},_createFooter:function(){switch(this.type){case 2:case 3:var c=a("<div />").attr({"data-role":"controlgroup","data-type":"horizontal"}).css({margin:"0",width:"100%"}),d=a("<a />",{text:"Ok"}).attr("data-rel","back").attr("data-role","button").on("click",function(){b.result=!0}),e=a("<a>",{text:"Cancel"}).attr("data-rel","back").attr("data-role","button");return c.append(e).append(d),c;case 1:default:var c=a("<div />").attr({"data-role":"controlgroup","data-type":"vertical"}).css("margin","0"),f=a("<a>",{text:"Close"}).attr("data-rel","back").attr("data-role","button");return f.appendTo(c),c}},_popupbeforeposition:function(c){var d=a(c.currentTarget);switch(b.type){case 1:d.find(".ui-controlgroup .ui-btn").css({"border-width":"1px 0 0"});break;case 2:case 3:d.find(".ui-controlgroup-controls").css("width","100%"),d.find(".ui-controlgroup .ui-btn").css({"box-sizing":"border-box",width:"50%","border-width":"1px 0 0"}),d.find(".ui-controlgroup .ui-btn.ui-last-child").css({"border-left-width":"1px"})}},_popupafterclose:function(c,d){var e=a(c.currentTarget);if(b.result&&3==b.type){var f=e.find("input").val();b.result=f?f:!1}e.remove(),d(b.result)}};a.jAlert=function(a,c){b.alert("Alert",a,c)},a.jConfirm=function(a,c,d){b.alert("Confirm",a,c,d)},a.jPrompt=function(a,c,d,e){b.alert("Prompt",a,d,e,c)}}(jQuery);
